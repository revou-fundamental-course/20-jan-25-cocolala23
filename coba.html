<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulator BMI</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
</head>
<body class="bg-gradient-to-r from-blue-100 to-blue-300 font-sans">
    <div class="max-w-5xl mx-auto py-8 px-4">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-blue-600">Kalkulator BMI</h1>
            <p class="text-gray-700 mt-2">Hitung BMI Anda dan dapatkan rekomendasi kesehatan!</p>
        </header>

        <div id="home" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Form Section -->
            <section class="bg-white shadow-lg rounded-lg p-6">
                <h2 class="text-xl font-semibold text-blue-600 mb-4">Masukkan Data Anda</h2>
                <form id="form" class="space-y-4">
                    <!-- Gender -->
                    <div>
                        <label class="block text-gray-700 font-medium mb-2">Jenis Kelamin:</label>
                        <div class="flex items-center space-x-4">
                            <label><input type="radio" name="gender" value="Pria" class="mr-2">Pria</label>
                            <label><input type="radio" name="gender" value="Wanita" class="mr-2">Wanita</label>
                        </div>
                        <p id="genderErrorMessage" class="text-red-500 text-sm error-message"></p>
                    </div>

                    <!-- Berat Badan -->
                    <div>
                        <label for="weight" class="block text-gray-700 font-medium mb-2">Berat Badan (kg):</label>
                        <input type="number" id="weight" name="weight" class="w-full border-gray-300 rounded px-3 py-2">
                        <p id="weightErrorMessage" class="text-red-500 text-sm error-message"></p>
                    </div>

                    <!-- Usia -->
                    <div>
                        <label for="age" class="block text-gray-700 font-medium mb-2">Usia (tahun):</label>
                        <input type="number" id="age" name="age" class="w-full border-gray-300 rounded px-3 py-2">
                        <p id="ageErrorMessage" class="text-red-500 text-sm error-message"></p>
                    </div>

                    <!-- Tinggi Badan -->
                    <div>
                        <label for="height" class="block text-gray-700 font-medium mb-2">Tinggi Badan (cm):</label>
                        <input type="number" id="height" name="height" class="w-full border-gray-300 rounded px-3 py-2">
                        <p id="heightErrorMessage" class="text-red-500 text-sm error-message"></p>
                    </div>

                    <!-- Buttons -->
                    <div class="flex justify-between items-center">
                        <button type="button" onclick="checkBMI()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Hitung BMI</button>
                        <button type="button" onclick="regenerateBMI()" class="bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500">Reset</button>
                    </div>
                </form>
            </section>

            <!-- Result Section -->
            <section id="result" class="bg-white shadow-lg rounded-lg p-6 d-hidden">
                <h2 class="text-xl font-semibold text-blue-600 mb-4">Hasil</h2>
                <div class="text-center">
                    <p class="text-2xl font-bold text-blue-500" id="result-bmi">--</p>
                    <p class="text-lg text-gray-700 mt-2" id="result-title">Masukkan data untuk melihat hasil.</p>
                </div>

                <div class="mt-4">
                    <p id="result-desc" class="text-gray-700"></p>
                    <p id="suggestion-text" class="text-gray-700 mt-2"></p>
                    <p id="advice-text" class="text-gray-700 mt-2"></p>
                </div>

                <div class="mt-6">
                    <h3 id="risk-title" class="text-lg font-semibold text-gray-700"></h3>
                    <ul id="list-risk" class="list-disc list-inside text-gray-600 mt-2"></ul>
                </div>

                <div class="mt-4">
                    <button onclick="regenerateBMI()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Hitung Ulang</button>
                </div>
            </section>
        </div>

        <!-- Footer -->
        <footer class="mt-8 text-center text-gray-600">
            <p>Download aplikasi untuk kemudahan lebih lanjut:</p>
            <div class="flex justify-center space-x-4 mt-4">
                <img src="https://via.placeholder.com/150x50?text=Google+Play" alt="Google Play">
                <img src="https://via.placeholder.com/150x50?text=App+Store" alt="App Store">
            </div>
        </footer>
    </div>

    <script>
        // Objek untuk menyimpan kategori BMI dan pesan terkaitnya
        const BMI_CATEGORIES = {
            UNDERWEIGHT: 'Kekurangan berat badan',
            NORMAL: 'Normal (ideal)',
            OVERWEIGHT: 'Kelebihan berat badan',
            OBESITY: 'Kegemukan (Obesitas)',
        };

        // Fungsi untuk menghitung BMI
        const calculateBMI = (weight, height) => {
            let bmi = weight / ((height / 100) ** 2);
            return bmi.toFixed(1);
        };

        // Validasi input
        const validateInput = (weight, height, age, gender) => {
            const genderErrorMessage = document.getElementById('genderErrorMessage');
            const weightErrorMessage = document.getElementById('weightErrorMessage');
            const ageErrorMessage = document.getElementById('ageErrorMessage');
            const heightErrorMessage = document.getElementById('heightErrorMessage');

            document.querySelectorAll('.error-message').forEach(el => el.innerText = '');
            
            let isValid = true;
            if (!gender || !['Pria', 'Wanita'].includes(gender)) {
                genderErrorMessage.innerText = 'Pilih jenis kelamin terlebih dahulu';
                isValid = false;
            }
            if (isNaN(weight) || weight <= 0) {
                weightErrorMessage.innerText = 'Berat badan harus berupa angka lebih dari 0';
                isValid = false;
            }
            if (isNaN(height) || height <= 0) {
                heightErrorMessage.innerText = 'Tinggi badan harus berupa angka lebih dari 0';
                isValid = false;
            }
            if (isNaN(age) || age <= 0) {
                ageErrorMessage.innerText = 'Usia harus berupa angka lebih dari 0';
                isValid = false;
            }

            return isValid;
        };

        // Cek status BMI
        const checkStatus = (bmi, gender) => {
            if (gender === 'Pria') {
                if (bmi < 18.5) return BMI_CATEGORIES.UNDERWEIGHT;
                if (bmi <= 24.9) return BMI_CATEGORIES.NORMAL;
                if (bmi <= 29.9) return BMI_CATEGORIES.OVERWEIGHT;
                return BMI_CATEGORIES.OBESITY;
            } else {
                if (bmi < 17) return BMI_CATEGORIES.UNDERWEIGHT;
                if (bmi <= 23.9) return BMI_CATEGORIES.NORMAL;
                if (bmi <= 27) return BMI_CATEGORIES.OVERWEIGHT;
                return BMI_CATEGORIES.OBESITY;
            }
        };

        // Generate hasil tampilan
        const generateDisplay = (bmi, status) => {
            document.getElementById('result-title').innerText = status;
            document.getElementById('result-bmi').innerText = bmi;
            document.getElementById('result-desc').innerText = status === BMI_CATEGORIES.NORMAL ? 'Anda memiliki berat badan ideal.' : 'Berat badan Anda tidak ideal.';
            document.getElementById('result').classList.remove('d-hidden');
            document.getElementById('home').classList.add('d-hidden');
        };

        // Cek BMI
        const checkBMI = () => {
            const weight = +document.getElementById('weight').value;
            const height = +document.getElementById('height').value;
            const age = +document.getElementById('age').value;
            const gender = document.querySelector('input[name="gender"]:checked')?.value;

            if (!validateInput(weight, height, age, gender)) return;

            const bmi = calculateBMI(weight, height);
            const status = checkStatus(bmi, gender);
            generateDisplay(bmi, status);
        };

        // Reset tampilan
        const regenerateBMI = () => {
            document.getElementById('form').reset();
            document.getElementById('home').classList.remove('d-hidden');
            document.getElementById('result').classList.add('d-hidden');
        };
    </script>
</body>
</html>
